---
layout: post
title: Folder wildcards like \**\ in CruiseControl.Net
tags:
- Code Quality
- Continuous Integration
- CruiseControl.Net
- MSBuild
status: publish
type: post
published: true
meta:
  _edit_last: '6'
  _edit_lock: '1231662282'
---

<p>Last week we were working on our Build Server using <a href="http://ccnet.thoughtworks.com/">CruiseControl.Net</a> to allow multiple Test / Code Coverage tasks for two or more solutions.</p>  

<p>Once we've configured the .proj file to run a set of two RunTests / RunCodeCoverage tasks we needed to merge the results file to the MSBuild log after running them.</p>  

<p>So, our first approach was modifying the <strong>ccnet.config</strong> file to merge the files generated by these tasks using the same pattern of MSBuild, I mean, using &quot;<strong>\**\</strong>&quot;, something like this:</p>  

{% highlight xml %}
<merge>
  <files>
    <file>D:\srv\ccnet\logs\project\**\*.trx</file>
    <file>D:\srv\ccnet\logs\project\**\*.cvg</file>
  </files>
</merge>
{% endhighlight %}

<p>At this point, we have figured out that Cruise Control .Net <strong>does not have</strong> this functionality, only it allows to run something like <strong>D:\srv\ccnet\logs\project\theProject\*.trx</strong>, and since the CruiseControl.Net source code is available I started to writing some lines to modify the <strong>ThoughtWorks.CruiseControl.Core</strong> assembly to allow that.</p>

<p>In this post you will find the source code of the spike I wrote with a series of tests to implement that feature and the <strong>WildCardPath.cs</strong> source code from the <strong>core</strong> CruiseControl.Net project updated.</p>

<ul>
  <li>Spike solution with tests [<a href="http://wauokg.blu.livefilestore.com/y1pe7Q3tmlVXP4V8KDMosAoCX6nGHh0ZY4wwPYtZZpRBgG0ke4_cWcyeWF9J_HpDwukTVtQYMN9A2_k2cDxupTRBA/Wildcards.zip?download">Download</a>] </li>

  <li><strong>WildCardPath</strong> class file of CruiseControl.Net Core assembly [<a href="http://wauokg.blu.livefilestore.com/y1pQFaMVkn3j8sb-OSgHSIca3tiTEwto5eAVkWX0AZIsdhyAzu8X6kYB62UFr9hrfGPEEDVCscYXQfJkGNLyISUVWXBL0n0dq9q/WildCardPath.zip?download">Download</a>] </li>
</ul>

<p>Once you have updated the Core project with the new implementation of the WildCardPath class, you need to do the following tasks to keep it running.</p>

<ol>
  <li>Compile the <strong>Core</strong> project </li>

  <li>Stop the CruiseControl.Net service </li>

  <li>Replace the <strong>ThoughtWorks.CruiseControl.Core </strong>assembly with the new one. </li>
</ol>

<p>And that's it, use wildcards as in MSBuild :)</p>
